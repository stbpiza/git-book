## 학습 키워드

- 집합체 (Aggregate)
- 불변식
- 트랜잭션적 일관성과 결과적 일관성

<hr>

## 집합체 (Aggregate)
> 집합체는 도메인 모델의 일부로서, 하나의 개념적인 단위로 묶여 있는 객체들의 집합이다.
- 트랜잭션 일관성을 유지하고 도메인 규칙을 적용하며 도메인 모델을 캡슐화하는 단위다.
- 4가지 경험 법칙
  1. 불변식을 통해 일관성 경계를 찾아서 모델링한다. Aggregate은 트랜잭션적 일관성 경계와 동의어다. 
  2. 작은 Aggregate으로 설계한다. 
  3. ID로 다른 Aggregate을 참조한다. JPA 등을 사용하면 관련된 객체를 모두 직접 참조할 수 있게 되는데, 그렇게 하지 않는다. 
  4. 경계 밖에선 결과적 일관성을 사용한다. 이를 위해 도메인 이벤트 등을 사용할 수 있다.
### Aggregate Root
> 집합체에 대한 진입점 역할
- 집합체에 속한 객체들은 집합체의 불변식을 지키기 위해 집합체 루트를 통해서만 접근할 수 있다.
### Consistency Boundary
> 집합체의 불변식을 지키기 위한 경계
- 집합체의 모든 작업은 원자적이어야 한다.
- 전체 작업이 성공하거나, 일부 작업이 실패하면 모두 이전 상태로 돌아가야 한다.
## 불변식
> 불변식은 집합체의 불변성을 보장하는 규칙이다.

## 트랜잭션적 일관성과 결과적 일관성